{# app/Resources/views/layout.html.twig #}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{% block title %}Knarf Plateforme{% endblock %}</title>

  {% block stylesheets %}
    <link href="{{ asset('bundles/knarfplatform/css/main.css') }}" type="text/css" rel="stylesheet">
    <link href="{{ asset('bundles/knarfuser/css/main.css') }}" type="text/css" rel="stylesheet">
    <link href="{{ asset('bundles/knarfplatform/css/hover-min.css') }}" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  {% endblock %}
</head>

<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="{{ path('knarf_platform_home') }}">Ma plateforme d'annonces</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">        
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="">Annonces<span class="caret"></span></a>
          <ul class="dropdown-menu">
             {{ render(controller("KnarfPlatformBundle:Advert:menu")) }}
          </ul>
        </li>
        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="">Rubriques<span class="caret"></span></a>
            <ul class="dropdown-menu">
                {{ render(controller("KnarfPlatformBundle:Rubrique:menu")) }}
            </ul>
        </li>
        {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}              
        <li>
            <a href="{{ path('knarf_platform_add') }}">Ajouter une annonce</a>
        </li>          
        {% endif %}        
        <li>
            <a href="{{ path('contact') }}">Contact</a>
        </li>
        <li>
            <a href="{{ path('knarf_chat') }}">Chatroom</></a>
        </li>
      </ul>
{#        <form class="navbar-form navbar-left" action="">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Rechercher">
                <div class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                        <i class="glyphicon glyphicon-search"></i>
                    </button>
                </div>
            </div>
        </form> #}

      <ul class="nav navbar-nav navbar-right">
        {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}  
       
    <li class="">
        {% if  app.user.avatar is not empty %}
        <img src="{{vich_uploader_asset(app.user.avatar, 'mediaFile') | imagine_filter('my_thumb') }}" alt=""  />
        {% else  %}
        {% image '@KnarfUserBundle/Resources/public/images/if_icon-person_211874.png' %}
        <img src="{{ asset_url }}" alt="" />
        {% endimage %}
    </li>
        {% endif %}

        {% if app.request.get('_route')!= 'profile'%}
                    
        <li><a href="{{ path('profile') }}">{{app.user.username}}</a></li>        
            
        {% endif %}
        
        <li><a href="{{ path('security_logout') }}"><span class="glyphicon glyphicon-log-out"></span> Déconnexion</a></li>
        
        {% else %}
            
        <li><a href="{{ path('register') }}"><span class="glyphicon glyphicon-user"></span> S'enregistrer</a></li>
        <li><a href="{{ path('security_login_form') }}"><span class="glyphicon glyphicon-log-in"></span> Connexion</a></li>
      </ul>
      {% endif %}
    </div>
  </div>
</nav>

    <div id="header" class="jumbotron text-center">
      
       <h1> Ce projet est propulsé avec Symfony3 par Franck</h1>      
      <p>
        <a class="btn btn-primary btn-lg" href="https://franckruer" target="blank">
          Aller voir Franck »
        </a>
      </p>
    </div>
  <div class="container-fluid">
  

        {% set flashbag_notices = app.session.flashbag.get('notice') %}
        {% if flashbag_notices is not empty %}

            
            <div class="glyphicon glyphicon-remove" id="msg" onClick="cacher();">
                {% for notice in flashbag_notices %}
                    {{ notice }}
                {% endfor %}
            </div>
            

        {% endif %}

  
  <div class="row">
      
    
        
    <div class="leftcolumn">
        
        

        
        {% block body %}
            


        {% endblock %}        

    </div>
    
    <div class="rightcolumn">
        
        {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
           {{ render(controller("KnarfUserBundle:Security:index")) }}
        {% endif %}
        
    </div>       
 
       
  </div>
</div>   
<hr>
    <div class="footer">
        <nav class="navbar">
        <div class="container-fluid">
            <div class="nav navbar-nav navbar-left">
          <p>© knarficious {{ 'now'|date('Y') }}</p>
            </div>
          <ul class="nav navbar-nav navbar-right">          
            <li>
                <a href="{{ path('nelmio_api_doc_index') }}">API Documentation</a>
            </li>
          </ul>
        </div>
        </nav>
    </div>
   
  <div id="back-to-top" style="display:bloc;">
      <a href="#" class="btn btn-primary btn-lg back-to-top" role="button" title="Revenir en haut de la page" data-toggle="tooltip" data-placement="left"><span class="glyphicon glyphicon-chevron-up"></span></a>
  </div>
      {% block javascripts %}
    {# Ajoutez ces lignes JavaScript si vous comptez vous servir des fonctionnalités du bootstrap Twitter #}
    <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.2/jquery.form.min.js"></script>
    <script>
                $(document).ready(function(){
                $(document.getElementById("msg")).click(function(){
                $(this).hide();
                });
                });
    </script>
    <script>
                $(document).ready(function(){
                $(document.getElementById("commentaire")).click(function(){
                $(this).hide();
                });
                });
    </script>
    <script>
            $(document).ready(function(){
            $(window).scroll(function () {
            if ($(this).scrollTop() > 50) {
            $('#back-to-top').fadeIn();
            } else {
            $('#back-to-top').fadeOut();
            }
            });
            // scroll body to 0px on click
            $('#back-to-top').click(function () {
            $('#back-to-top').tooltip();
            $('body,html').animate({
            scrollTop: 0
            }, 800);
            return false;
            });        
            $('#back-to-top').tooltip();
            });
    </script>
    <script>
            $(document).ready(function(){
            $('[data-toggle="tooltip"]').tooltip();
            });
    </script>
    
  {% endblock %}

</body>
</html>
