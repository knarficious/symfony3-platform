{# src/Knarf/PlatformBundle/Resources/views/Rubrique/index.html.twig #}

{% extends "KnarfPlatformBundle::layout.html.twig" %}


{% block title %}

La base - {{ parent() }}

{% endblock %} 


{% block knarfplatform_body %}    

    {{ parent() }}

        {{ render(controller("KnarfPlatformBundle:Advert:menu")) }}

        <br>
{% for rubrique in listRubriques %} 
    
    <section class="container-fluid" id="section-rubrique">                     
            {% if rubrique.adverts is not empty %}
                  
            <div class="well">
                <a href="{{ path('rubrique_ext', {'slug': rubrique.slug}) }}">
                    <h3 style="text-align: center;">{{ rubrique.intitule }}</h3>
                </a>
            </div>
                  
            {% for entity in rubrique.adverts|slice(0, 3) %}
                      
            <article class="col-md-4">

                <div class="thumbnail hvr-grow">
                    <a href="{{ path('knarf_platform_view', {'slug': entity.slug}) }}">
                    {% if entity.nomMedia is defined %}        

                    {% if entity.nomMedia ends with 'jpg' or entity.nomMedia ends with 'png' or entity.nomMedia ends with 'gif' %}

                    <img src="{{vich_uploader_asset(entity, 'mediaFile') }}" alt="{{ entity.nomMedia }}"/>


                    {% elseif entity.nomMedia ends with 'mp3' %}

                    <span class="glyphicon glyphicon-play">
                    </span>

                    {% elseif entity.nomMedia ends with 'mp4' %}

                    <div class="embed-responsive embed-responsive-16by9">
                    <video controls>
                    <source src="{{ asset('uploads/medias/') }}{{ entity.nomMedia }}" type="video/mp4">
                    </video>          
                    </div>

                    {% else %}                                    
                    {% endif %}        

                    {% endif %}

                    <div class="caption">
                        <b>{{ entity.title }}</b> par <em>{{ entity.user.username }}</em>, le {{ entity.date|date('d/m/Y') }}
                    </div>
                    </a>
                </div>
            </article>        
                      
            {% endfor %}
                  
            {% endif %}    
        
    </section>            

{% endfor %}

{%  endblock %}

{% block next_body %}
    
    {{ include('KnarfPlatformBundle:Clock:view.html.twig') }}
{% endblock %}